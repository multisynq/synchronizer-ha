# Test Dockerfile based on Alpine Linux (similar to Home Assistant base)
FROM alpine:latest

# Set shell
SHELL ["/bin/bash", "-o", "pipefail", "-c"]

# Install bash first
RUN apk update && apk add --no-cache bash

# Install Node.js and npm
RUN apk add --no-cache nodejs npm

# Install synchronizer-cli globally
RUN npm install -g synchronizer-cli

# Create a simple test script
COPY test-run.sh /test-run.sh
RUN chmod +x /test-run.sh

# Set working directory
WORKDIR /data

CMD ["/test-run.sh"]
